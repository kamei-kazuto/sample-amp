<!DOCTYPE html>
<html âš¡ lang="en">
  <head>
    <meta charset="utf-8" />
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
    <script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script>
    <script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></script>
    <script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
    <script async custom-element="amp-selector" src="https://cdn.ampproject.org/v0/amp-selector-0.1.js"></script>
    <title>SAMPLE AMP EC Site</title>
    <link
      rel="canonical"
      href="http://kamei-kazuto.github.io/sample-amp"
    />
    <!-- <link
      rel="amphtml"
      href="http://kamei-kazuto.github.io/sample-amp/amp.html"
    /> -->
    <meta
      name="viewport"
      content="width=device-width,minimum-scale=1,initial-scale=1"
    />
    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "NewsArticle",
        "headline": "Sample AMP page",
        "datePublished": "2018-12-08T12:02:41Z",
        "image": [
          "logo.jpg"
        ]
      }
    </script>
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
      /*** uncss> filename: https://code.getmdl.io/1.3.0/material.indigo-pink.min.css ***/
      /**
        * material-design-lite - Material Design Components in CSS, JS and HTML
        * @version v1.3.0
        * @license Apache-2.0
        * @copyright 2015 Google, Inc.
        * @link https://github.com/google/material-design-lite
        */
      html{color:rgba(0,0,0,.87)}::-moz-selection{background:#b3d4fc;text-shadow:none}::selection{background:#b3d4fc;text-shadow:none}.hidden{display:none}@media print{*,*:before,*:after{background:transparent;color:#000;box-shadow:none}tr{page-break-inside:avoid}p{orphans:3;widows:3}}.mdl-button{-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:rgba(255,255,255,0)}html{width:100%;height:100%;-ms-touch-action:manipulation;touch-action:manipulation}body{width:100%;min-height:100%}html,body{font-family:"Helvetica","Arial",sans-serif;font-size:14px;font-weight:400;line-height:20px}h5,h6,p{padding:0}h5{font-size:20px;font-weight:500;line-height:1;letter-spacing:.02em}h5,h6{font-family:"Roboto","Helvetica","Arial",sans-serif;margin:24px 0 16px}h6{font-size:16px;letter-spacing:.04em}h6,p{font-weight:400;line-height:24px}p{font-size:14px;letter-spacing:0;margin:0 0 16px}.mdl-color-text--red{color:#f44336 }.mdl-color-text--blue{color:#2196f3 }.mdl-color-text--grey{color:#9e9e9e }.mdl-color--black{background-color:#000 }.mdl-color-text--white{color:#fff }.mdl-button{background:0 0;border:none;border-radius:2px;color:#000;position:relative;height:36px;margin:0;min-width:64px;padding:0 16px;display:inline-block;font-family:"Roboto","Helvetica","Arial",sans-serif;font-size:14px;font-weight:500;text-transform:uppercase;letter-spacing:0;overflow:hidden;will-change:box-shadow;transition:box-shadow .2s cubic-bezier(.4,0,1,1),background-color .2s cubic-bezier(.4,0,.2,1),color .2s cubic-bezier(.4,0,.2,1);outline:none;cursor:pointer;text-decoration:none;text-align:center;line-height:36px;vertical-align:middle}.mdl-button::-moz-focus-inner{border:0}.mdl-button:hover{background-color:rgba(158,158,158,.2)}.mdl-button:focus:not(:active){background-color:rgba(0,0,0,.12)}.mdl-button:active{background-color:rgba(158,158,158,.4)}.mdl-button.mdl-button--colored:focus:not(:active){background-color:rgba(0,0,0,.12)}.mdl-button--raised{background:rgba(158,158,158,.2);box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.mdl-button--raised:active{box-shadow:0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12),0 2px 4px -1px rgba(0,0,0,.2);background-color:rgba(158,158,158,.4)}.mdl-button--raised:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:rgba(158,158,158,.4)}.mdl-button--raised.mdl-button--colored:focus:not(:active){background-color:rgb(63,81,181)}.mdl-button--fab:focus:not(:active){box-shadow:0 0 8px rgba(0,0,0,.18),0 8px 16px rgba(0,0,0,.36);background-color:rgba(158,158,158,.4)}.mdl-button--fab.mdl-button--colored:focus:not(:active){background-color:rgb(255,64,129)}.mdl-button--accent.mdl-button--accent{color:rgb(255,64,129)}.mdl-button--accent.mdl-button--accent.mdl-button--raised{color:rgb(255,255,255);background-color:rgb(255,64,129)}.mdl-button[disabled][disabled]{color:rgba(0,0,0,.26);cursor:default;background-color:transparent}.mdl-button--raised[disabled][disabled]{background-color:rgba(0,0,0,.12);color:rgba(0,0,0,.26);box-shadow:none}@supports (-webkit-appearance:none){}@supports (pointer-events:auto){}.mdl-slider.is-upgraded:focus:not(:active)::-webkit-slider-thumb{box-shadow:0 0 0 10px rgba(63,81,181,.26)}.mdl-slider.is-upgraded:focus:not(:active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(63,81,181,.26)}.mdl-slider.is-upgraded:focus:not(:active)::-ms-thumb{background:radial-gradient(circle closest-side,rgb(63,81,181)0%,rgb(63,81,181)37.5%,rgba(63,81,181,.26)37.5%,rgba(63,81,181,.26)100%);transform:scale(1)}.mdl-slider.is-upgraded.is-lowest-value:focus:not(:active)::-webkit-slider-thumb{box-shadow:0 0 0 10px rgba(0,0,0,.12);background:rgba(0,0,0,.12)}.mdl-slider.is-upgraded.is-lowest-value:focus:not(:active)::-moz-range-thumb{box-shadow:0 0 0 10px rgba(0,0,0,.12);background:rgba(0,0,0,.12)}.mdl-slider.is-upgraded.is-lowest-value:focus:not(:active)::-ms-thumb{background:radial-gradient(circle closest-side,rgba(0,0,0,.12)0%,rgba(0,0,0,.12)25%,rgba(0,0,0,.26)25%,rgba(0,0,0,.26)37.5%,rgba(0,0,0,.12)37.5%,rgba(0,0,0,.12)100%);transform:scale(1)}body{margin:0}
      /* custom css */
      #header {
        height: 24px;
        padding: 16px;
        margin: 0;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 2px;
        line-height: 24px;
      }
      .menu {
        float: left;
      }
      .search {
        float: right;
      }
      #container {
        max-width: 500px;
        padding: 32px 16px 64px 16px;
        margin: auto;
      }
      .title {
        text-align: center;
      }
      .rating {
        margin-bottom: 0;
        text-align: center;
      }
      #carousel {
        margin: 16px;
      }
      .dots {
        text-align: center;
      }
      .dots span {
        display: inline-block;
        background: #ccc;
        border-radius: 6px;
        width: 12px;
        height: 12px;
        margin: 4px;
      }
      .dots span.current {
        background: #555;
      }
      .options {
        margin: 16px 0;
      }
      .options h6 {
        text-transform: uppercase;
        margin: 0 0 4px 0;
      }
      .colors table {
        margin: 0 -8px;
      }
      .colors amp-img {
        border: solid 2px white;
        display: block;
        margin: auto;
      }
      .colors amp-img[selected] {
        outline: solid 2px red;
      }
      .sizes div {
        border: solid 1px black;
        width: 40px;
        height: 40px;
        line-height: 40px;
        font-weight: 800;
        text-align: center;
      }
      .sizes div[selected] {
        background-color: gray;
        color: white;
        outline: none;
      }
      .unavailable::before {
        content: '';
        position: absolute;
        border-top: 1px solid black;
        margin-left: 1px;
        width: 57px;
        transform: rotate(45deg);
        transform-origin: 0% 0%;
      }
      .quantity select {
        font-size: 16px;
        border: solid 1px gray;
        padding: 8px;
      }
      table {
        width: 100%;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>SAMPLE AMP EC Product</h1>
    <amp-state id="selected">
      <script type="application/json">
        {
          "slide": 0,
          "sku": "1001"
        }
      </script>
    </amp-state>
    <amp-state id="product">
      <script type="application/json">
      {
        "1001": {
          "color": "black",
          "image": "./assets/sample_ec/1001.png",
          "sizes": {
            "XS": 8.99,
            "S": 9.99
          }
        },
        "1002": {
          "color": "blue",
          "image": "./assets/sample_ec/1002.png",
          "sizes": {
            "M": 12.99,
            "L": 13.99
          }
        },
        "1003": {
          "color": "brown",
          "image": "./assets/sample_ec/1003.png",
          "sizes": {
            "L": 15.99,
            "XL": 17.99
          }
        }
      }
      </script>
    </amp-state>
    <amp-carousel type="slides" layout="fixed-height" height=250 id="carousel">
      <amp-img width=200 height=250 src="./assets/sample_ec/1001.png" [src]="product[selected.sku].image"></amp-img>
      <amp-img width=300 height=375 src="./assets/sample_ec/1001.png" [src]="product[selected.sku].image"></amp-img>
      <amp-img width=400 height=500 src="./assets/sample_ec/1001.png" [src]="product[selected.sku].image"></amp-img>
    </amp-carousel>
    <p class="dots">
      <span [class]="selected.slide == 0 ? 'current' : ''" class="current"></span>
      <span [class]="selected.slide == 1 ? 'current' : ''"></span>
      <span [class]="selected.slide == 2 ? 'current' : ''"></span>
    </p>
    <form method="post" action-xhr="/product/addToCart" target="_top">
      <div class="options colors">
        <h6>COLORS</h6>

        <!--
          Tip: <amp-selector> functions like an <input> element when nested in a <form>.
          @see https://www.ampproject.org/docs/reference/components/amp-form#inputs-and-fields
        -->
        <amp-selector name="color"
          on="select:AMP.setState({selected: {sku: event.targetOption}})">
          <table>
            <tr>
              <td><amp-img width=40 height=40 option="1001" src="./assets/sample_ec/1001.png" selected></amp-img></td>
              <td><amp-img width=40 height=40 option="1002" src="./assets/sample_ec/1002.png"></amp-img></td>
              <td><amp-img width=40 height=40 option="1003" src="./assets/sample_ec/1003.png"></amp-img></td>
            </tr>
          </table>
        </amp-selector>
      </div>

      <div class="options price">
        <h6>PRICE :
          <span [text]="product[selected.sku].sizes[selectedSize] || '---'">---</span>
        </h6>
      </div>

      <div class="options sizes">
        <h6>SIZE :
          <span [text]="selectedSize || '---'">---</span>
        </h6>

        <!-- TODO: "Variable shirt prices" -->
        <amp-selector name="size"
          on="select:AMP.setState({ selectedSize: event.targetOption})">
          <table>
            <tr>
              <td [class]="product[selected.sku].sizes['XS'] ? '' : 'unavailable'">
                <div option="XS">XS</div>
              </td>
              <td [class]="product[selected.sku].sizes['S'] ? '' : 'unavailable'">
                <div option="S">S</div>
              </td>
              <td [class]="product[selected.sku].sizes['M'] ? '' : 'unavailable'">
                <div option="M">M</div>
              </td>
              <td [class]="product[selected.sku].sizes['L'] ? '' : 'unavailable'">
                <div option="L">L</div>
              </td>
              <td [class]="product[selected.sku].sizes['XL'] ? '' : 'unavailable'">
                <div option="XL">XL</div>
              </td>
            </tr>
          </table>
        </amp-selector>
      </div>

      <div class="options quantity">
        <h6>QUANTITY : <span [text]="quantity || '---'">---</span></h6>
        <select name="quantity" on="select:AMP.setState({ quantity: event.target.value})">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
        </select>
      </div>

      <div class="options purchase">
        <!-- TODO: "Conditionally enabled button" -->
        <input type="submit" value="ADD TO CART"
          class="mdl-button mdl-button--raised mdl-button--accent"
          [disabled]="!selectedSize || !product[selected.sku].sizes[selectedSize]">
      </div>

      <div submit-success>
        <template type="amp-mustache">Added {{quantity}} shirt(s) to cart!</template>
      </div>
      <div submit-error>
        <template type="amp-mustache">Error adding to cart: {{error}}</template>
      </div>
    </form>
  </body>
</html>
